(function(d){var c="textareaPreview";var b={container:null,containerClass:"preview",updateInterval:100,preprocess:null,enabled:true};var a={init:function(e){if(e){e=d.extend({},b,e)}else{e=d.extend({},b)}var f=this.each(function(){var h=d(this);var g=h.data(c);if(!g){var i=null;if(e.container&&d(e.container).length){i=d(e.container)}else{i=d("<div></div>").addClass(e.containerClass).insertAfter(h)}h.data(c,{container:i,updateInterval:e.updateInterval,preprocess:e.preprocess,textChanged:false})}});if(e.enabled){a.enable.apply(f)}return f},enable:function(){return this.each(function(){var g=d(this);var f=g.data(c);f.enabled=true;f.textChanged=true;g.data(c,f);g.bind("keyup."+c,function(){var h=g.data(c);h.textChanged=true;g.data(c,h)});var e=function(){var h=g.data(c);if(!h.enabled){return}if(h.textChanged){var i=g.val();if(h.preprocess){i=h.preprocess(i)}h.container.html(i);h.textChanged=false;g.data(c,h)}setTimeout(e,h.updateInterval)};f.container.show();e()})},disable:function(){return this.each(function(){var f=d(this);var e=f.data(c);e.enabled=false;f.data(c,e);f.unbind("keyup."+c);e.container.hide()})}};d.fn[c]=function(e){if(a[e]){return a[e].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof e==="object"||!e){return a.init.apply(this,arguments)}else{d.error("Method "+e+" does not exist on jQuery."+c)}}}})(jQuery);